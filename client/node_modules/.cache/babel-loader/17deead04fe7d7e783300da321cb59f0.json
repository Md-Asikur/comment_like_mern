{"ast":null,"code":"import _objectSpread from\"C:/Users/scs/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/scs/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/scs/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from'react';import{auth}from'../_actions/user_actions';import{useSelector,useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function(ComposedClass,reload){var adminRoute=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;function AuthenticationCheck(props){var user=useSelector(function(state){return state.user;});var dispatch=useDispatch();useEffect(function(){dispatch(auth()).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return!response.payload.isAuth;case 2:if(!_context.sent){_context.next=6;break;}if(reload){props.history.push('/register_login');}_context.next=7;break;case 6:if(adminRoute&&!response.payload.isAdmin){props.history.push('/');}else{if(reload===false){props.history.push('/');}}case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[dispatch,props.history,user.googleAuth]);return/*#__PURE__*/_jsx(ComposedClass,_objectSpread(_objectSpread({},props),{},{user:user}));}return AuthenticationCheck;}","map":{"version":3,"names":["React","useEffect","auth","useSelector","useDispatch","ComposedClass","reload","adminRoute","AuthenticationCheck","props","user","state","dispatch","then","response","payload","isAuth","history","push","isAdmin","googleAuth"],"sources":["C:/Users/scs/OneDrive/Desktop/Youtube Deploy/client/src/hoc/auth.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { auth } from '../_actions/user_actions';\nimport { useSelector, useDispatch } from \"react-redux\";\n\nexport default function (ComposedClass, reload, adminRoute = null) {\n    function AuthenticationCheck(props) {\n\n        let user = useSelector(state => state.user);\n        const dispatch = useDispatch();\n\n        useEffect(() => {\n\n            dispatch(auth()).then(async response => {\n                if (await !response.payload.isAuth) {\n                    if (reload) {\n                        props.history.push('/register_login')\n                    }\n                } else {\n                    if (adminRoute && !response.payload.isAdmin) {\n                        props.history.push('/')\n                    }\n                    else {\n                        if (reload === false) {\n                            props.history.push('/')\n                        }\n                    }\n                }\n            })\n            \n        }, [dispatch, props.history, user.googleAuth])\n\n        return (\n            <ComposedClass {...props} user={user} />\n        )\n    }\n    return AuthenticationCheck\n}\n\n\n"],"mappings":"kcAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,0BAArB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,C,2CAEA,cAAe,UAAUC,aAAV,CAAyBC,MAAzB,CAAoD,IAAnBC,WAAmB,2DAAN,IAAM,CAC/D,QAASC,oBAAT,CAA6BC,KAA7B,CAAoC,CAEhC,GAAIC,KAAI,CAAGP,WAAW,CAAC,SAAAQ,KAAK,QAAIA,MAAK,CAACD,IAAV,EAAN,CAAtB,CACA,GAAME,SAAQ,CAAGR,WAAW,EAA5B,CAEAH,SAAS,CAAC,UAAM,CAEZW,QAAQ,CAACV,IAAI,EAAL,CAAR,CAAiBW,IAAjB,4FAAsB,iBAAMC,QAAN,0IACR,CAACA,QAAQ,CAACC,OAAT,CAAiBC,MADV,kDAEd,GAAIV,MAAJ,CAAY,CACRG,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,iBAAnB,EACH,CAJa,6BAMd,GAAIX,UAAU,EAAI,CAACO,QAAQ,CAACC,OAAT,CAAiBI,OAApC,CAA6C,CACzCV,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,CAFD,IAGK,CACD,GAAIZ,MAAM,GAAK,KAAf,CAAsB,CAClBG,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,CACJ,CAba,sDAAtB,gEAiBH,CAnBQ,CAmBN,CAACN,QAAD,CAAWH,KAAK,CAACQ,OAAjB,CAA0BP,IAAI,CAACU,UAA/B,CAnBM,CAAT,CAqBA,mBACI,KAAC,aAAD,gCAAmBX,KAAnB,MAA0B,IAAI,CAAEC,IAAhC,GADJ,CAGH,CACD,MAAOF,oBAAP,CACH"},"metadata":{},"sourceType":"module"}