{"ast":null,"code":"import _slicedToArray from\"C:/Users/scs/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Tooltip,Icon}from'antd';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LikeDislikes(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),Likes=_useState2[0],setLikes=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),Dislikes=_useState4[0],setDislikes=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),LikeAction=_useState6[0],setLikeAction=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),DislikeAction=_useState8[0],setDislikeAction=_useState8[1];var variable={};if(props.video){variable={videoId:props.videoId,userId:props.userId};}else{variable={commentId:props.commentId,userId:props.userId};}useEffect(function(){axios.post('/api/like/getLikes',variable).then(function(response){console.log('getLikes',response.data);if(response.data.success){//How many likes does this video or comment have \nsetLikes(response.data.likes.length);//if I already click this like button or not \nresponse.data.likes.map(function(like){if(like.userId===props.userId){setLikeAction('liked');}});}else{alert('Failed to get likes');}});axios.post(\"/api/like/getDislikes\",variable).then(function(response){console.log(\"getDislike\",response.data);if(response.data.success){//How many likes does this video or comment have\nsetDislikes(response.data.dislikes.length);//if I already click this like button or not\nresponse.data.dislikes.map(function(dislike){if(dislike.userId===props.userId){setDislikeAction(\"disliked\");}});}else{alert(\"Failed to get dislikes\");}});},[]);var onLike=function onLike(){if(LikeAction===null){axios.post('/api/like/upLike',variable).then(function(response){if(response.data.success){setLikes(Likes+1);setLikeAction('liked');//If dislike button is already clicked\nif(DislikeAction!==null){setDislikeAction(null);setDislikes(Dislikes-1);}}else{alert('Failed to increase the like');}});}else{axios.post('/api/like/unLike',variable).then(function(response){if(response.data.success){setLikes(Likes-1);setLikeAction(null);}else{alert('Failed to decrease the like');}});}};var onDisLike=function onDisLike(){if(DislikeAction!==null){axios.post('/api/like/unDisLike',variable).then(function(response){if(response.data.success){setDislikes(Dislikes-1);setDislikeAction(null);}else{alert('Failed to decrease dislike');}});}else{axios.post('/api/like/upDisLike',variable).then(function(response){if(response.data.success){setDislikes(Dislikes+1);setDislikeAction('disliked');//If dislike button is already clicked\nif(LikeAction!==null){setLikeAction(null);setLikes(Likes-1);}}else{alert('Failed to increase dislike');}});}};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Like\",children:/*#__PURE__*/_jsx(Icon,{type:\"like\",theme:LikeAction==='liked'?'filled':'outlined',onClick:onLike})}),/*#__PURE__*/_jsx(\"span\",{style:{paddingLeft:'8px',cursor:'auto'},children:Likes})]},\"comment-basic-like\"),\"\\xA0\\xA0\",/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Dislike\",children:/*#__PURE__*/_jsx(Icon,{type:\"dislike\",theme:DislikeAction==='disliked'?'filled':'outlined',onClick:onDisLike})}),/*#__PURE__*/_jsx(\"span\",{style:{paddingLeft:'8px',cursor:'auto'},children:Dislikes})]},\"comment-basic-dislike\")]});}export default LikeDislikes;","map":{"version":3,"names":["React","useEffect","useState","Tooltip","Icon","axios","LikeDislikes","props","Likes","setLikes","Dislikes","setDislikes","LikeAction","setLikeAction","DislikeAction","setDislikeAction","variable","video","videoId","userId","commentId","post","then","response","console","log","data","success","likes","length","map","like","alert","dislikes","dislike","onLike","onDisLike","paddingLeft","cursor"],"sources":["C:/Users/scs/OneDrive/Desktop/react-youtube-clone-master/client/src/components/views/DetailVideoPage/Sections/LikeDislikes.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Tooltip, Icon } from 'antd';\nimport axios from 'axios';\n\nfunction LikeDislikes(props) {\n\n    const [Likes, setLikes] = useState(0)\n    const [Dislikes, setDislikes] = useState(0)\n    const [LikeAction, setLikeAction] = useState(null)\n    const [DislikeAction, setDislikeAction] = useState(null)\n    let variable = {};\n\n    if (props.video) {\n        variable = { videoId: props.videoId, userId: props.userId }\n    } else {\n        variable = { commentId: props.commentId, userId: props.userId }\n    }\n\n    \n\n\n    useEffect(() => {\n\n        axios.post('/api/like/getLikes', variable)\n            .then(response => {\n                console.log('getLikes',response.data)\n\n                if (response.data.success) {\n                    //How many likes does this video or comment have \n                    setLikes(response.data.likes.length)\n\n                    //if I already click this like button or not \n                    response.data.likes.map(like => {\n                        if (like.userId === props.userId) {\n                            setLikeAction('liked')\n                        }\n                    })\n                } else {\n                    alert('Failed to get likes')\n                }\n            })\n\n       axios.post(\"/api/like/getDislikes\", variable).then((response) => {\n         console.log(\"getDislike\", response.data);\n         if (response.data.success) {\n           //How many likes does this video or comment have\n           setDislikes(response.data.dislikes.length);\n\n           //if I already click this like button or not\n           response.data.dislikes.map((dislike) => {\n             if (dislike.userId === props.userId) {\n               setDislikeAction(\"disliked\");\n             }\n           });\n         } else {\n           alert(\"Failed to get dislikes\");\n         }\n       });\n\n    }, [])\n\n\n    const onLike = () => {\n\n        if (LikeAction === null) {\n\n           axios.post('/api/like/upLike', variable)\n                .then(response => {\n                    if (response.data.success) {\n\n                        setLikes(Likes + 1)\n                        setLikeAction('liked')\n\n                        //If dislike button is already clicked\n\n                        if (DislikeAction !== null) {\n                            setDislikeAction(null)\n                            setDislikes(Dislikes - 1)\n                        }\n\n\n                    } else {\n                        alert('Failed to increase the like')\n                    }\n                })\n\n\n        } else {\n\n          axios.post('/api/like/unLike', variable)\n                .then(response => {\n                    if (response.data.success) {\n\n                        setLikes(Likes - 1)\n                        setLikeAction(null)\n\n                    } else {\n                        alert('Failed to decrease the like')\n                    }\n                })\n\n        }\n\n    }\n\n\n    const onDisLike = () => {\n\n        if (DislikeAction !== null) {\n\n           axios.post('/api/like/unDisLike', variable)\n                .then(response => {\n                    if (response.data.success) {\n\n                        setDislikes(Dislikes - 1)\n                        setDislikeAction(null)\n\n                    } else {\n                        alert('Failed to decrease dislike')\n                    }\n                })\n\n        } else {\n\n           axios.post('/api/like/upDisLike', variable)\n                .then(response => {\n                    if (response.data.success) {\n\n                        setDislikes(Dislikes + 1)\n                        setDislikeAction('disliked')\n\n                        //If dislike button is already clicked\n                        if(LikeAction !== null ) {\n                            setLikeAction(null)\n                            setLikes(Likes - 1)\n                        }\n\n                    } else {\n                        alert('Failed to increase dislike')\n                    }\n                })\n\n\n        }\n\n\n    }\n\n    return (\n        <React.Fragment>\n            <span key=\"comment-basic-like\">\n                <Tooltip title=\"Like\">\n                    <Icon type=\"like\"\n                        theme={LikeAction === 'liked' ? 'filled' : 'outlined'}\n                        onClick={onLike} />\n                </Tooltip>\n                <span style={{ paddingLeft: '8px', cursor: 'auto' }}>{Likes}</span>\n            </span>&nbsp;&nbsp;\n            <span key=\"comment-basic-dislike\">\n                <Tooltip title=\"Dislike\">\n                    <Icon\n                        type=\"dislike\"\n                        theme={DislikeAction === 'disliked' ? 'filled' : 'outlined'}\n                        onClick={onDisLike}\n                    />\n                </Tooltip>\n                <span style={{ paddingLeft: '8px', cursor: 'auto' }}>{Dislikes}</span>\n            </span>\n        </React.Fragment>\n    )\n}\n\nexport default LikeDislikes\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}