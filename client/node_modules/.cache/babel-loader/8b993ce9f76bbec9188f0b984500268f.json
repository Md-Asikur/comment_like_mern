{"ast":null,"code":"import _slicedToArray from\"C:/Users/scs/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{List,Avatar,Row,Col}from'antd';import axios from'axios';import SideVideo from'./Sections/SideVideo';import Subscriber from'./Sections/Subscriber';import Comments from'./Sections/Comments';import LikeDislikes from'./Sections/LikeDislikes';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DetailVideoPage(props){var videoId=props.match.params.videoId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Video=_useState2[0],setVideo=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),CommentLists=_useState4[0],setCommentLists=_useState4[1];var videoVariable={videoId:videoId};useEffect(function(){axios.post('/api/video/getVideo',videoVariable).then(function(response){if(response.data.success){console.log(response.data.video);setVideo(response.data.video);}else{alert('Failed to get video Info');}});axios.post('/api/comment/getComments',videoVariable).then(function(response){if(response.data.success){console.log('response.data.comments',response.data.comments);setCommentLists(response.data.comments);}else{alert('Failed to get video Info');}});},[]);var updateComment=function updateComment(newComment){setCommentLists(CommentLists.concat(newComment));};if(Video.writer){return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:18,xs:24,children:/*#__PURE__*/_jsxs(\"div\",{className:\"postPage\",style:{width:'100%',padding:'3rem 4em'},children:[/*#__PURE__*/_jsx(\"video\",{style:{width:'100%'},src:\"http://localhost:5000/\".concat(Video.filePath),controls:true}),/*#__PURE__*/_jsxs(List.Item,{actions:[/*#__PURE__*/_jsx(LikeDislikes,{video:true,videoId:videoId,userId:localStorage.getItem('userId')}),/*#__PURE__*/_jsx(Subscriber,{userTo:Video.writer._id,userFrom:localStorage.getItem('userId')})],children:[/*#__PURE__*/_jsx(List.Item.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{src:Video.writer&&Video.writer.image}),title:/*#__PURE__*/_jsx(\"a\",{href:\"https://ant.design\",children:Video.title}),description:Video.description}),/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsx(Comments,{CommentLists:CommentLists,postId:Video._id,refreshFunction:updateComment})]})}),/*#__PURE__*/_jsx(Col,{lg:6,xs:24,children:/*#__PURE__*/_jsx(SideVideo,{})})]});}else{return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}}export default DetailVideoPage;","map":{"version":3,"names":["React","useEffect","useState","List","Avatar","Row","Col","axios","SideVideo","Subscriber","Comments","LikeDislikes","DetailVideoPage","props","videoId","match","params","Video","setVideo","CommentLists","setCommentLists","videoVariable","post","then","response","data","success","console","log","video","alert","comments","updateComment","newComment","concat","writer","width","padding","filePath","localStorage","getItem","_id","image","title","description"],"sources":["C:/Users/scs/OneDrive/Desktop/Youtube Deploy/client/src/components/views/DetailVideoPage/DetailVideoPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { List, Avatar, Row, Col } from 'antd';\nimport axios from 'axios';\nimport SideVideo from './Sections/SideVideo';\nimport Subscriber from './Sections/Subscriber';\nimport Comments from './Sections/Comments'\nimport LikeDislikes from './Sections/LikeDislikes';\nfunction DetailVideoPage(props) {\n\n\n    const videoId = props.match.params.videoId\n    const [Video, setVideo] = useState([])\n    const [CommentLists, setCommentLists] = useState([])\n\n    const videoVariable = {\n        videoId: videoId\n    }\n\n    useEffect(() => {\n        axios.post('/api/video/getVideo', videoVariable)\n            .then(response => {\n                if (response.data.success) {\n                    console.log(response.data.video)\n                    setVideo(response.data.video)\n                } else {\n                    alert('Failed to get video Info')\n                }\n            })\n\n        axios.post('/api/comment/getComments', videoVariable)\n            .then(response => {\n                if (response.data.success) {\n                    console.log('response.data.comments',response.data.comments)\n                    setCommentLists(response.data.comments)\n                } else {\n                    alert('Failed to get video Info')\n                }\n            })\n\n\n    }, [])\n\n    const updateComment = (newComment) => {\n        setCommentLists(CommentLists.concat(newComment))\n    }\n\n\n    if (Video.writer) {\n        return (\n            <Row>\n                <Col lg={18} xs={24}>\n                    <div className=\"postPage\" style={{ width: '100%', padding: '3rem 4em' }}>\n                        <video style={{ width: '100%' }} src={`http://localhost:5000/${Video.filePath}`} controls></video>\n\n                        <List.Item\n                            actions={[<LikeDislikes video videoId={videoId} userId={localStorage.getItem('userId')}  />, <Subscriber userTo={Video.writer._id} userFrom={localStorage.getItem('userId')} />]}\n                        >\n                            <List.Item.Meta\n                                avatar={<Avatar src={Video.writer && Video.writer.image} />}\n                                title={<a href=\"https://ant.design\">{Video.title}</a>}\n                                description={Video.description}\n                            />\n                            <div></div>\n                        </List.Item>\n\n                        <Comments CommentLists={CommentLists} postId={Video._id} refreshFunction={updateComment} />\n\n                    </div>\n                </Col>\n                <Col lg={6} xs={24}>\n\n                    <SideVideo />\n\n                </Col>\n            </Row>\n        )\n\n    } else {\n        return (\n            <div>Loading...</div>\n        )\n    }\n\n\n}\n\nexport default DetailVideoPage\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}