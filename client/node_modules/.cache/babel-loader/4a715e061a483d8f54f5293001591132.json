{"ast":null,"code":"import _slicedToArray from\"C:/Users/scs/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Button,Input}from'antd';import axios from'axios';import{useSelector}from'react-redux';import SingleComment from'./SingleComment';import ReplyComment from'./ReplyComment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TextArea=Input.TextArea;function Comments(props){var user=useSelector(function(state){return state.user;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),Comment=_useState2[0],setComment=_useState2[1];var handleChange=function handleChange(e){setComment(e.currentTarget.value);};var onSubmit=function onSubmit(e){e.preventDefault();var variables={content:Comment,writer:user.userData._id,postId:props.postId};axios.post('/api/comment/saveComment',variables).then(function(response){if(response.data.success){setComment(\"\");props.refreshFunction(response.data.result);}else{alert('Failed to save Comment');}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\" replies\"}),/*#__PURE__*/_jsx(\"hr\",{}),console.log(props.CommentLists),props.CommentLists&&props.CommentLists.map(function(comment,index){return!comment.responseTo&&/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(SingleComment,{comment:comment,postId:props.postId,refreshFunction:props.refreshFunction}),/*#__PURE__*/_jsx(ReplyComment,{CommentLists:props.CommentLists,postId:props.postId,parentCommentId:comment._id,refreshFunction:props.refreshFunction})]});}),/*#__PURE__*/_jsxs(\"form\",{style:{display:'flex'},onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(TextArea,{style:{width:'100%',borderRadius:'5px'},onChange:handleChange,value:Comment,placeholder:\"write some comments\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{style:{width:'20%',height:'52px'},onClick:onSubmit,children:\"Submit\"})]})]});}export default Comments;","map":{"version":3,"names":["React","useState","Button","Input","axios","useSelector","SingleComment","ReplyComment","TextArea","Comments","props","user","state","Comment","setComment","handleChange","e","currentTarget","value","onSubmit","preventDefault","variables","content","writer","userData","_id","postId","post","then","response","data","success","refreshFunction","result","alert","console","log","CommentLists","map","comment","index","responseTo","display","width","borderRadius","height"],"sources":["C:/Users/scs/OneDrive/Desktop/Youtube Deploy/client/src/components/views/DetailVideoPage/Sections/Comments.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { Button, Input } from 'antd';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport SingleComment from './SingleComment';\nimport ReplyComment from './ReplyComment';\nconst { TextArea } = Input;\n\nfunction Comments(props) {\n    const user = useSelector(state => state.user)\n    const [Comment, setComment] = useState(\"\")\n\n    const handleChange = (e) => {\n        setComment(e.currentTarget.value)\n    }\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        const variables = {\n            content: Comment,\n            writer: user.userData._id,\n            postId: props.postId\n        }\n\n        axios.post('/api/comment/saveComment', variables)\n            .then(response => {\n                if (response.data.success) {\n                    setComment(\"\")\n                    props.refreshFunction(response.data.result)\n                } else {\n                    alert('Failed to save Comment')\n                }\n            })\n    }\n\n    return (\n        <div>\n            <br />\n            <p> replies</p>\n            <hr />\n            {/* Comment Lists  */}\n            {console.log(props.CommentLists)}\n\n            {props.CommentLists && props.CommentLists.map((comment, index) => (\n                (!comment.responseTo &&\n                    <React.Fragment>\n                        <SingleComment comment={comment} postId={props.postId} refreshFunction={props.refreshFunction} />\n                        <ReplyComment CommentLists={props.CommentLists} postId={props.postId} parentCommentId={comment._id} refreshFunction={props.refreshFunction} />\n                    </React.Fragment>\n                )\n            ))}\n\n\n\n            {/* Root Comment Form */}\n            <form style={{ display: 'flex' }} onSubmit={onSubmit}>\n                <TextArea\n                    style={{ width: '100%', borderRadius: '5px' }}\n                    onChange={handleChange}\n                    value={Comment}\n                    placeholder=\"write some comments\"\n                />\n                <br />\n                <Button style={{ width: '20%', height: '52px' }} onClick={onSubmit}>Submit</Button>\n            </form>\n\n        </div>\n    )\n}\n\nexport default Comments\n"],"mappings":"iJAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,MAAT,CAAiBC,KAAjB,KAA8B,MAA9B,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,cAAP,KAA0B,iBAA1B,CACA,MAAOC,aAAP,KAAyB,gBAAzB,C,wFACA,GAAQC,SAAR,CAAqBL,KAArB,CAAQK,QAAR,CAEA,QAASC,SAAT,CAAkBC,KAAlB,CAAyB,CACrB,GAAMC,KAAI,CAAGN,WAAW,CAAC,SAAAO,KAAK,QAAIA,MAAK,CAACD,IAAV,EAAN,CAAxB,CACA,cAA8BV,QAAQ,CAAC,EAAD,CAAtC,wCAAOY,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAO,CACxBF,UAAU,CAACE,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAV,CACH,CAFD,CAIA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACH,CAAD,CAAO,CACpBA,CAAC,CAACI,cAAF,GAEA,GAAMC,UAAS,CAAG,CACdC,OAAO,CAAET,OADK,CAEdU,MAAM,CAAEZ,IAAI,CAACa,QAAL,CAAcC,GAFR,CAGdC,MAAM,CAAEhB,KAAK,CAACgB,MAHA,CAAlB,CAMAtB,KAAK,CAACuB,IAAN,CAAW,0BAAX,CAAuCN,SAAvC,EACKO,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAlB,CAA2B,CACvBjB,UAAU,CAAC,EAAD,CAAV,CACAJ,KAAK,CAACsB,eAAN,CAAsBH,QAAQ,CAACC,IAAT,CAAcG,MAApC,EACH,CAHD,IAGO,CACHC,KAAK,CAAC,wBAAD,CAAL,CACH,CACJ,CARL,EASH,CAlBD,CAoBA,mBACI,oCACI,aADJ,cAEI,+BAFJ,cAGI,aAHJ,CAKKC,OAAO,CAACC,GAAR,CAAY1B,KAAK,CAAC2B,YAAlB,CALL,CAOK3B,KAAK,CAAC2B,YAAN,EAAsB3B,KAAK,CAAC2B,YAAN,CAAmBC,GAAnB,CAAuB,SAACC,OAAD,CAAUC,KAAV,QACzC,CAACD,OAAO,CAACE,UAAT,eACG,MAAC,KAAD,CAAO,QAAP,yBACI,KAAC,aAAD,EAAe,OAAO,CAAEF,OAAxB,CAAiC,MAAM,CAAE7B,KAAK,CAACgB,MAA/C,CAAuD,eAAe,CAAEhB,KAAK,CAACsB,eAA9E,EADJ,cAEI,KAAC,YAAD,EAAc,YAAY,CAAEtB,KAAK,CAAC2B,YAAlC,CAAgD,MAAM,CAAE3B,KAAK,CAACgB,MAA9D,CAAsE,eAAe,CAAEa,OAAO,CAACd,GAA/F,CAAoG,eAAe,CAAEf,KAAK,CAACsB,eAA3H,EAFJ,GAFsC,EAAvB,CAP3B,cAmBI,cAAM,KAAK,CAAE,CAAEU,OAAO,CAAE,MAAX,CAAb,CAAkC,QAAQ,CAAEvB,QAA5C,wBACI,KAAC,QAAD,EACI,KAAK,CAAE,CAAEwB,KAAK,CAAE,MAAT,CAAiBC,YAAY,CAAE,KAA/B,CADX,CAEI,QAAQ,CAAE7B,YAFd,CAGI,KAAK,CAAEF,OAHX,CAII,WAAW,CAAC,qBAJhB,EADJ,cAOI,aAPJ,cAQI,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAE8B,KAAK,CAAE,KAAT,CAAgBE,MAAM,CAAE,MAAxB,CAAf,CAAiD,OAAO,CAAE1B,QAA1D,oBARJ,GAnBJ,GADJ,CAiCH,CAED,cAAeV,SAAf"},"metadata":{},"sourceType":"module"}