{"ast":null,"code":"import _slicedToArray from\"C:/Users/scs/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Subscriber(props){var userTo=props.userTo;var userFrom=props.userFrom;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),SubscribeNumber=_useState2[0],setSubscribeNumber=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Subscribed=_useState4[0],setSubscribed=_useState4[1];var onSubscribe=function onSubscribe(){var subscribeVariables={userTo:userTo,userFrom:userFrom};if(Subscribed){//when we are already subscribed \naxios.post('/api/subscribe/unSubscribe',subscribeVariables).then(function(response){if(response.data.success){setSubscribeNumber(SubscribeNumber-1);setSubscribed(!Subscribed);}else{alert('Failed to unsubscribe');}});}else{// when we are not subscribed yet\naxios.post('/api/subscribe/subscribe',subscribeVariables).then(function(response){if(response.data.success){setSubscribeNumber(SubscribeNumber+1);setSubscribed(!Subscribed);}else{alert('Failed to subscribe');}});}};useEffect(function(){var subscribeNumberVariables={userTo:userTo,userFrom:userFrom};axios.post('/api/subscribe/subscribeNumber',subscribeNumberVariables).then(function(response){if(response.data.success){setSubscribeNumber(response.data.subscribeNumber);}else{alert('Failed to get subscriber Number');}});axios.post('/api/subscribe/subscribed',subscribeNumberVariables).then(function(response){if(response.data.success){setSubscribed(response.data.subcribed);}else{alert('Failed to get Subscribed Information');}});},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:onSubscribe,style:{backgroundColor:\"\".concat(Subscribed?'#AAAAAA':'#CC0000'),borderRadius:'4px',color:'white',padding:'10px 16px',fontWeight:'500',fontSize:'1rem',textTransform:'uppercase'},children:[SubscribeNumber,\" \",Subscribed?'Subscribed':'Subscribe']})});}export default Subscriber;","map":{"version":3,"names":["React","useEffect","useState","axios","Subscriber","props","userTo","userFrom","SubscribeNumber","setSubscribeNumber","Subscribed","setSubscribed","onSubscribe","subscribeVariables","post","then","response","data","success","alert","subscribeNumberVariables","subscribeNumber","subcribed","backgroundColor","borderRadius","color","padding","fontWeight","fontSize","textTransform"],"sources":["C:/Users/scs/OneDrive/Desktop/react-youtube-clone-master/client/src/components/views/DetailVideoPage/Sections/Subscriber.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios';\nfunction Subscriber(props) {\n    const userTo = props.userTo\n    const userFrom = props.userFrom\n\n    const [SubscribeNumber, setSubscribeNumber] = useState(0)\n    const [Subscribed, setSubscribed] = useState(false)\n\n    const onSubscribe = ( ) => {\n\n        let subscribeVariables = {\n                userTo : userTo,\n                userFrom : userFrom\n        }\n\n        if(Subscribed) {\n            //when we are already subscribed \n            axios.post('/api/subscribe/unSubscribe', subscribeVariables)\n                .then(response => {\n                    if(response.data.success){ \n                        setSubscribeNumber(SubscribeNumber - 1)\n                        setSubscribed(!Subscribed)\n                    } else {\n                        alert('Failed to unsubscribe')\n                    }\n                })\n\n        } else {\n            // when we are not subscribed yet\n            \n            axios.post('/api/subscribe/subscribe', subscribeVariables)\n                .then(response => {\n                    if(response.data.success) {\n                        setSubscribeNumber(SubscribeNumber + 1)\n                        setSubscribed(!Subscribed)\n                    } else {\n                        alert('Failed to subscribe')\n                    }\n                })\n        }\n\n    }\n\n\n    useEffect(() => {\n\n        const subscribeNumberVariables = { userTo: userTo, userFrom: userFrom }\n        axios.post('/api/subscribe/subscribeNumber', subscribeNumberVariables)\n            .then(response => {\n                if (response.data.success) {\n                    setSubscribeNumber(response.data.subscribeNumber)\n                } else {\n                    alert('Failed to get subscriber Number')\n                }\n            })\n\n        axios.post('/api/subscribe/subscribed', subscribeNumberVariables)\n            .then(response => {\n                if (response.data.success) {\n                    setSubscribed(response.data.subcribed)\n                } else {\n                    alert('Failed to get Subscribed Information')\n                }\n            })\n\n    }, [])\n\n\n    return (\n        <div>\n            <button \n            onClick={onSubscribe}\n            style={{\n                backgroundColor: `${Subscribed ? '#AAAAAA' : '#CC0000'}`,\n                borderRadius: '4px', color: 'white',\n                padding: '10px 16px', fontWeight: '500', fontSize: '1rem', textTransform: 'uppercase'\n            }}>\n                {SubscribeNumber} {Subscribed ? 'Subscribed' : 'Subscribe'}\n            </button>\n        </div>\n    )\n}\n\nexport default Subscriber\n\n"],"mappings":"iJAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,wFACA,QAASC,WAAT,CAAoBC,KAApB,CAA2B,CACvB,GAAMC,OAAM,CAAGD,KAAK,CAACC,MAArB,CACA,GAAMC,SAAQ,CAAGF,KAAK,CAACE,QAAvB,CAEA,cAA8CL,QAAQ,CAAC,CAAD,CAAtD,wCAAOM,eAAP,eAAwBC,kBAAxB,eACA,eAAoCP,QAAQ,CAAC,KAAD,CAA5C,yCAAOQ,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAO,CAEvB,GAAIC,mBAAkB,CAAG,CACjBP,MAAM,CAAGA,MADQ,CAEjBC,QAAQ,CAAGA,QAFM,CAAzB,CAKA,GAAGG,UAAH,CAAe,CACX;AACAP,KAAK,CAACW,IAAN,CAAW,4BAAX,CAAyCD,kBAAzC,EACKE,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAGA,QAAQ,CAACC,IAAT,CAAcC,OAAjB,CAAyB,CACrBT,kBAAkB,CAACD,eAAe,CAAG,CAAnB,CAAlB,CACAG,aAAa,CAAC,CAACD,UAAF,CAAb,CACH,CAHD,IAGO,CACHS,KAAK,CAAC,uBAAD,CAAL,CACH,CACJ,CARL,EAUH,CAZD,IAYO,CACH;AAEAhB,KAAK,CAACW,IAAN,CAAW,0BAAX,CAAuCD,kBAAvC,EACKE,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAGA,QAAQ,CAACC,IAAT,CAAcC,OAAjB,CAA0B,CACtBT,kBAAkB,CAACD,eAAe,CAAG,CAAnB,CAAlB,CACAG,aAAa,CAAC,CAACD,UAAF,CAAb,CACH,CAHD,IAGO,CACHS,KAAK,CAAC,qBAAD,CAAL,CACH,CACJ,CARL,EASH,CAEJ,CAjCD,CAoCAlB,SAAS,CAAC,UAAM,CAEZ,GAAMmB,yBAAwB,CAAG,CAAEd,MAAM,CAAEA,MAAV,CAAkBC,QAAQ,CAAEA,QAA5B,CAAjC,CACAJ,KAAK,CAACW,IAAN,CAAW,gCAAX,CAA6CM,wBAA7C,EACKL,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAlB,CAA2B,CACvBT,kBAAkB,CAACO,QAAQ,CAACC,IAAT,CAAcI,eAAf,CAAlB,CACH,CAFD,IAEO,CACHF,KAAK,CAAC,iCAAD,CAAL,CACH,CACJ,CAPL,EASAhB,KAAK,CAACW,IAAN,CAAW,2BAAX,CAAwCM,wBAAxC,EACKL,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAlB,CAA2B,CACvBP,aAAa,CAACK,QAAQ,CAACC,IAAT,CAAcK,SAAf,CAAb,CACH,CAFD,IAEO,CACHH,KAAK,CAAC,sCAAD,CAAL,CACH,CACJ,CAPL,EASH,CArBQ,CAqBN,EArBM,CAAT,CAwBA,mBACI,kCACI,gBACA,OAAO,CAAEP,WADT,CAEA,KAAK,CAAE,CACHW,eAAe,WAAKb,UAAU,CAAG,SAAH,CAAe,SAA9B,CADZ,CAEHc,YAAY,CAAE,KAFX,CAEkBC,KAAK,CAAE,OAFzB,CAGHC,OAAO,CAAE,WAHN,CAGmBC,UAAU,CAAE,KAH/B,CAGsCC,QAAQ,CAAE,MAHhD,CAGwDC,aAAa,CAAE,WAHvE,CAFP,WAOKrB,eAPL,KAOuBE,UAAU,CAAG,YAAH,CAAkB,WAPnD,GADJ,EADJ,CAaH,CAED,cAAeN,WAAf"},"metadata":{},"sourceType":"module"}