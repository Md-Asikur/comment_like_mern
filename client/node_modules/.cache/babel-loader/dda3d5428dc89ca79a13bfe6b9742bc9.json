{"ast":null,"code":"import _slicedToArray from\"C:/Users/scs/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{withRouter}from\"react-router-dom\";import{loginUser}from\"../../../_actions/user_actions\";import{Formik}from'formik';import*as Yup from'yup';import{Form,Icon,Input,Button,Checkbox,Typography}from'antd';import{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Title=Typography.Title;function LoginPage(props){var dispatch=useDispatch();var rememberMeChecked=localStorage.getItem(\"rememberMe\")?true:false;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formErrorMessage=_useState2[0],setFormErrorMessage=_useState2[1];var _useState3=useState(rememberMeChecked),_useState4=_slicedToArray(_useState3,2),rememberMe=_useState4[0],setRememberMe=_useState4[1];var handleRememberMe=function handleRememberMe(){setRememberMe(!rememberMe);};var initialEmail=localStorage.getItem(\"rememberMe\")?\"\":'';return/*#__PURE__*/_jsx(Formik,{initialValues:{email:initialEmail,password:''},validationSchema:Yup.object().shape({email:Yup.string().email('Email is invalid').required('Email is required'),password:Yup.string().min(6,'Password must be at least 6 characters').required('Password is required')}),onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;setTimeout(function(){var dataToSubmit={email:values.email,password:values.password};dispatch(loginUser(dataToSubmit)).then(function(response){if(response.payload.loginSuccess){window.localStorage.setItem('userId',response.payload.userId);if(rememberMe===true){window.localStorage.setItem('rememberMe',values.id);}else{localStorage.removeItem('rememberMe');}props.history.push(\"/\");}else{setFormErrorMessage('Check out your Account or Password again');}}).catch(function(err){setFormErrorMessage('Check out your Account or Password again');setTimeout(function(){setFormErrorMessage(\"\");},3000);});setSubmitting(false);},500);},children:function children(props){var values=props.values,touched=props.touched,errors=props.errors,dirty=props.dirty,isSubmitting=props.isSubmitting,handleChange=props.handleChange,handleBlur=props.handleBlur,handleSubmit=props.handleSubmit,handleReset=props.handleReset;return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Title,{level:2,children:\"Log In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{width:'350px'},children:[/*#__PURE__*/_jsxs(Form.Item,{required:true,children:[/*#__PURE__*/_jsx(Input,{id:\"email\",prefix:/*#__PURE__*/_jsx(Icon,{type:\"user\",style:{color:'rgba(0,0,0,.25)'}}),placeholder:\"Enter your email\",type:\"email\",value:values===null||values===void 0?void 0:values.email,onChange:handleChange,onBlur:handleBlur,className:errors.email&&touched.email?'text-input error':'text-input'}),errors.email&&touched.email&&/*#__PURE__*/_jsx(\"div\",{className:\"input-feedback\",children:errors.email})]}),/*#__PURE__*/_jsxs(Form.Item,{required:true,children:[/*#__PURE__*/_jsx(Input,{id:\"password\",prefix:/*#__PURE__*/_jsx(Icon,{type:\"lock\",style:{color:'rgba(0,0,0,.25)'}}),placeholder:\"Enter your password\",type:\"password\",value:values.password,onChange:handleChange,onBlur:handleBlur,className:errors.password&&touched.password?'text-input error':'text-input'}),errors.password&&touched.password&&/*#__PURE__*/_jsx(\"div\",{className:\"input-feedback\",children:errors.password})]}),formErrorMessage&&/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#ff0000bf',fontSize:'0.7rem',border:'1px solid',padding:'1rem',borderRadius:'10px'},children:formErrorMessage})}),/*#__PURE__*/_jsxs(Form.Item,{children:[/*#__PURE__*/_jsx(Checkbox,{id:\"rememberMe\",onChange:handleRememberMe,checked:rememberMe,children:\"Remember me\"}),/*#__PURE__*/_jsx(\"a\",{className:\"login-form-forgot\",href:\"/reset_user\",style:{float:'right'},children:\"forgot password\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",style:{minWidth:'100%'},disabled:isSubmitting,onSubmit:handleSubmit,children:\"Log in\"})}),\"Or \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"register now!\"})]})]})]});}});};export default withRouter(LoginPage);","map":{"version":3,"names":["React","useState","withRouter","loginUser","Formik","Yup","Form","Icon","Input","Button","Checkbox","Typography","useDispatch","Title","LoginPage","props","dispatch","rememberMeChecked","localStorage","getItem","formErrorMessage","setFormErrorMessage","rememberMe","setRememberMe","handleRememberMe","initialEmail","email","password","object","shape","string","required","min","values","setSubmitting","setTimeout","dataToSubmit","then","response","payload","loginSuccess","window","setItem","userId","id","removeItem","history","push","catch","err","touched","errors","dirty","isSubmitting","handleChange","handleBlur","handleSubmit","handleReset","width","color","fontSize","border","padding","borderRadius","float","minWidth"],"sources":["C:/Users/scs/OneDrive/Desktop/react-youtube-clone-master/client/src/components/views/LoginPage/LoginPage.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { loginUser } from \"../../../_actions/user_actions\";\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { Form, Icon, Input, Button, Checkbox, Typography } from 'antd';\nimport { useDispatch } from \"react-redux\";\n\nconst { Title } = Typography;\n\nfunction LoginPage(props) {\n  const dispatch = useDispatch();\n  const rememberMeChecked = localStorage.getItem(\"rememberMe\") ? true : false;\n\n  const [formErrorMessage, setFormErrorMessage] = useState('')\n  const [rememberMe, setRememberMe] = useState(rememberMeChecked)\n\n  const handleRememberMe = () => {\n    setRememberMe(!rememberMe)\n  };\n\n  const initialEmail = localStorage.getItem(\"rememberMe\") ? \"\" : '';\n\n  return (\n    <Formik\n      initialValues={{\n        email: initialEmail,\n        password: '',\n      }}\n      validationSchema={Yup.object().shape({\n        email: Yup.string()\n          .email('Email is invalid')\n          .required('Email is required'),\n        password: Yup.string()\n          .min(6, 'Password must be at least 6 characters')\n          .required('Password is required'),\n      })}\n      onSubmit={(values, { setSubmitting }) => {\n        setTimeout(() => {\n          let dataToSubmit = {\n            email: values.email,\n            password: values.password\n          };\n\n          dispatch(loginUser(dataToSubmit))\n            .then(response => {\n              if (response.payload.loginSuccess) {\n                window.localStorage.setItem('userId', response.payload.userId);\n                if (rememberMe === true) {\n                  window.localStorage.setItem('rememberMe', values.id);\n                } else {\n                  localStorage.removeItem('rememberMe');\n                }\n                props.history.push(\"/\");\n              } else {\n                setFormErrorMessage('Check out your Account or Password again')\n              }\n            })\n            .catch(err => {\n              setFormErrorMessage('Check out your Account or Password again')\n              setTimeout(() => {\n                setFormErrorMessage(\"\")\n              }, 3000);\n            });\n          setSubmitting(false);\n        }, 500);\n      }}\n    >\n      {props => {\n        const {\n          values,\n          touched,\n          errors,\n          dirty,\n          isSubmitting,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          handleReset,\n        } = props;\n        return (\n          <div className=\"app\">\n\n            <Title level={2}>Log In</Title>\n            <form onSubmit={handleSubmit} style={{ width: '350px' }}>\n\n              <Form.Item required>\n                <Input\n                  id=\"email\"\n                  prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                  placeholder=\"Enter your email\"\n                  type=\"email\"\n                  value={values?.email}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  className={\n                    errors.email && touched.email ? 'text-input error' : 'text-input'\n                  }\n                />\n                {errors.email && touched.email && (\n                  <div className=\"input-feedback\">{errors.email}</div>\n                )}\n              </Form.Item>\n\n              <Form.Item required>\n                <Input\n                  id=\"password\"\n                  prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                  placeholder=\"Enter your password\"\n                  type=\"password\"\n                  value={values.password}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  className={\n                    errors.password && touched.password ? 'text-input error' : 'text-input'\n                  }\n                />\n                {errors.password && touched.password && (\n                  <div className=\"input-feedback\">{errors.password}</div>\n                )}\n              </Form.Item>\n\n              {formErrorMessage && (\n                <label ><p style={{ color: '#ff0000bf', fontSize: '0.7rem', border: '1px solid', padding: '1rem', borderRadius: '10px' }}>{formErrorMessage}</p></label>\n              )}\n\n              <Form.Item>\n                <Checkbox id=\"rememberMe\" onChange={handleRememberMe} checked={rememberMe} >Remember me</Checkbox>\n                <a className=\"login-form-forgot\" href=\"/reset_user\" style={{ float: 'right' }}>\n                  forgot password\n                  </a>\n                <div>\n                  <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" style={{ minWidth: '100%' }} disabled={isSubmitting} onSubmit={handleSubmit}>\n                    Log in\n                </Button>\n                </div>\n                Or <a href=\"/register\">register now!</a>\n              </Form.Item>\n            </form>\n          </div>\n        );\n      }}\n    </Formik>\n  );\n};\n\nexport default withRouter(LoginPage);\n\n\n"],"mappings":"iJAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,SAAT,KAA0B,gCAA1B,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAO,GAAKC,IAAZ,KAAqB,KAArB,CACA,OAASC,IAAT,CAAeC,IAAf,CAAqBC,KAArB,CAA4BC,MAA5B,CAAoCC,QAApC,CAA8CC,UAA9C,KAAgE,MAAhE,CACA,OAASC,WAAT,KAA4B,aAA5B,C,wFAEA,GAAQC,MAAR,CAAkBF,UAAlB,CAAQE,KAAR,CAEA,QAASC,UAAT,CAAmBC,KAAnB,CAA0B,CACxB,GAAMC,SAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,kBAAiB,CAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAqC,IAArC,CAA4C,KAAtE,CAEA,cAAgDlB,QAAQ,CAAC,EAAD,CAAxD,wCAAOmB,gBAAP,eAAyBC,mBAAzB,eACA,eAAoCpB,QAAQ,CAACgB,iBAAD,CAA5C,yCAAOK,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAC7BD,aAAa,CAAC,CAACD,UAAF,CAAb,CACD,CAFD,CAIA,GAAMG,aAAY,CAAGP,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAqC,EAArC,CAA0C,EAA/D,CAEA,mBACE,KAAC,MAAD,EACE,aAAa,CAAE,CACbO,KAAK,CAAED,YADM,CAEbE,QAAQ,CAAE,EAFG,CADjB,CAKE,gBAAgB,CAAEtB,GAAG,CAACuB,MAAJ,GAAaC,KAAb,CAAmB,CACnCH,KAAK,CAAErB,GAAG,CAACyB,MAAJ,GACJJ,KADI,CACE,kBADF,EAEJK,QAFI,CAEK,mBAFL,CAD4B,CAInCJ,QAAQ,CAAEtB,GAAG,CAACyB,MAAJ,GACPE,GADO,CACH,CADG,CACA,wCADA,EAEPD,QAFO,CAEE,sBAFF,CAJyB,CAAnB,CALpB,CAaE,QAAQ,CAAE,kBAACE,MAAD,MAA+B,IAApBC,cAAoB,MAApBA,aAAoB,CACvCC,UAAU,CAAC,UAAM,CACf,GAAIC,aAAY,CAAG,CACjBV,KAAK,CAAEO,MAAM,CAACP,KADG,CAEjBC,QAAQ,CAAEM,MAAM,CAACN,QAFA,CAAnB,CAKAX,QAAQ,CAACb,SAAS,CAACiC,YAAD,CAAV,CAAR,CACGC,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACC,OAAT,CAAiBC,YAArB,CAAmC,CACjCC,MAAM,CAACvB,YAAP,CAAoBwB,OAApB,CAA4B,QAA5B,CAAsCJ,QAAQ,CAACC,OAAT,CAAiBI,MAAvD,EACA,GAAIrB,UAAU,GAAK,IAAnB,CAAyB,CACvBmB,MAAM,CAACvB,YAAP,CAAoBwB,OAApB,CAA4B,YAA5B,CAA0CT,MAAM,CAACW,EAAjD,EACD,CAFD,IAEO,CACL1B,YAAY,CAAC2B,UAAb,CAAwB,YAAxB,EACD,CACD9B,KAAK,CAAC+B,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACD,CARD,IAQO,CACL1B,mBAAmB,CAAC,0CAAD,CAAnB,CACD,CACF,CAbH,EAcG2B,KAdH,CAcS,SAAAC,GAAG,CAAI,CACZ5B,mBAAmB,CAAC,0CAAD,CAAnB,CACAc,UAAU,CAAC,UAAM,CACfd,mBAAmB,CAAC,EAAD,CAAnB,CACD,CAFS,CAEP,IAFO,CAAV,CAGD,CAnBH,EAoBAa,aAAa,CAAC,KAAD,CAAb,CACD,CA3BS,CA2BP,GA3BO,CAAV,CA4BD,CA1CH,UA4CG,kBAAAnB,KAAK,CAAI,CACR,GACEkB,OADF,CAUIlB,KAVJ,CACEkB,MADF,CAEEiB,OAFF,CAUInC,KAVJ,CAEEmC,OAFF,CAGEC,MAHF,CAUIpC,KAVJ,CAGEoC,MAHF,CAIEC,KAJF,CAUIrC,KAVJ,CAIEqC,KAJF,CAKEC,YALF,CAUItC,KAVJ,CAKEsC,YALF,CAMEC,YANF,CAUIvC,KAVJ,CAMEuC,YANF,CAOEC,UAPF,CAUIxC,KAVJ,CAOEwC,UAPF,CAQEC,YARF,CAUIzC,KAVJ,CAQEyC,YARF,CASEC,WATF,CAUI1C,KAVJ,CASE0C,WATF,CAWA,mBACE,aAAK,SAAS,CAAC,KAAf,wBAEE,KAAC,KAAD,EAAO,KAAK,CAAE,CAAd,oBAFF,cAGE,cAAM,QAAQ,CAAED,YAAhB,CAA8B,KAAK,CAAE,CAAEE,KAAK,CAAE,OAAT,CAArC,wBAEE,MAAC,IAAD,CAAM,IAAN,EAAW,QAAQ,KAAnB,wBACE,KAAC,KAAD,EACE,EAAE,CAAC,OADL,CAEE,MAAM,cAAE,KAAC,IAAD,EAAM,IAAI,CAAC,MAAX,CAAkB,KAAK,CAAE,CAAEC,KAAK,CAAE,iBAAT,CAAzB,EAFV,CAGE,WAAW,CAAC,kBAHd,CAIE,IAAI,CAAC,OAJP,CAKE,KAAK,CAAE1B,MAAF,SAAEA,MAAF,iBAAEA,MAAM,CAAEP,KALjB,CAME,QAAQ,CAAE4B,YANZ,CAOE,MAAM,CAAEC,UAPV,CAQE,SAAS,CACPJ,MAAM,CAACzB,KAAP,EAAgBwB,OAAO,CAACxB,KAAxB,CAAgC,kBAAhC,CAAqD,YATzD,EADF,CAaGyB,MAAM,CAACzB,KAAP,EAAgBwB,OAAO,CAACxB,KAAxB,eACC,YAAK,SAAS,CAAC,gBAAf,UAAiCyB,MAAM,CAACzB,KAAxC,EAdJ,GAFF,cAoBE,MAAC,IAAD,CAAM,IAAN,EAAW,QAAQ,KAAnB,wBACE,KAAC,KAAD,EACE,EAAE,CAAC,UADL,CAEE,MAAM,cAAE,KAAC,IAAD,EAAM,IAAI,CAAC,MAAX,CAAkB,KAAK,CAAE,CAAEiC,KAAK,CAAE,iBAAT,CAAzB,EAFV,CAGE,WAAW,CAAC,qBAHd,CAIE,IAAI,CAAC,UAJP,CAKE,KAAK,CAAE1B,MAAM,CAACN,QALhB,CAME,QAAQ,CAAE2B,YANZ,CAOE,MAAM,CAAEC,UAPV,CAQE,SAAS,CACPJ,MAAM,CAACxB,QAAP,EAAmBuB,OAAO,CAACvB,QAA3B,CAAsC,kBAAtC,CAA2D,YAT/D,EADF,CAaGwB,MAAM,CAACxB,QAAP,EAAmBuB,OAAO,CAACvB,QAA3B,eACC,YAAK,SAAS,CAAC,gBAAf,UAAiCwB,MAAM,CAACxB,QAAxC,EAdJ,GApBF,CAsCGP,gBAAgB,eACf,oCAAQ,UAAG,KAAK,CAAE,CAAEuC,KAAK,CAAE,WAAT,CAAsBC,QAAQ,CAAE,QAAhC,CAA0CC,MAAM,CAAE,WAAlD,CAA+DC,OAAO,CAAE,MAAxE,CAAgFC,YAAY,CAAE,MAA9F,CAAV,UAAmH3C,gBAAnH,EAAR,EAvCJ,cA0CE,MAAC,IAAD,CAAM,IAAN,yBACE,KAAC,QAAD,EAAU,EAAE,CAAC,YAAb,CAA0B,QAAQ,CAAEI,gBAApC,CAAsD,OAAO,CAAEF,UAA/D,yBADF,cAEE,UAAG,SAAS,CAAC,mBAAb,CAAiC,IAAI,CAAC,aAAtC,CAAoD,KAAK,CAAE,CAAE0C,KAAK,CAAE,OAAT,CAA3D,6BAFF,cAKE,kCACE,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAC,QAAhC,CAAyC,SAAS,CAAC,mBAAnD,CAAuE,KAAK,CAAE,CAAEC,QAAQ,CAAE,MAAZ,CAA9E,CAAoG,QAAQ,CAAEZ,YAA9G,CAA4H,QAAQ,CAAEG,YAAtI,oBADF,EALF,oBAUK,UAAG,IAAI,CAAC,WAAR,2BAVL,GA1CF,GAHF,GADF,CA6DD,CArHH,EADF,CAyHD,EAED,cAAetD,WAAU,CAACY,SAAD,CAAzB"},"metadata":{},"sourceType":"module"}